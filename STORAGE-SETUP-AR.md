# ๐ผ๏ธ ุฅุนุฏุงุฏ Storage ููุตูุฑ ุงูุดุฎุตูุฉ - ุฏููู ุนุฑุจู

## ุงูุฎุทูุฉ 1: ุงูุญุตูู ุนูู Service Role Key

1. **ุงูุชุญ Supabase Dashboard:**
   - ุงุฐูุจ ุฅูู: https://supabase.com/dashboard
   - ุณุฌู ุงูุฏุฎูู ุฅูู ุญุณุงุจู

2. **ุงุฎุชุฑ ูุดุฑูุนู:**
   - ุงุถุบุท ุนูู ุงููุดุฑูุน ุงูุฎุงุต ุจู Banda Chao

3. **ุงูุชุญ ุตูุญุฉ API Settings:**
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุถุบุท **Settings** (ุงูุฅุนุฏุงุฏุงุช)
   - ุซู ุงุถุบุท **API**

4. **ุงูุณุฎ Service Role Key:**
   - ุณุชุฌุฏ ูุณู ุงุณูู **Project API keys**
   - ุงูุณุฎ **service_role** key (ุงูููุชุงุญ ุงูุณุฑู)
   - โ๏ธ **ููู ุฌุฏุงู:** ูุฐุง ููุชุงุญ ุณุฑู - ูุง ุชุดุงุฑูู ุฃุจุฏุงู!

---

## ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ ุงูููุชุงุญ ุฅูู ุงููุดุฑูุน

1. **ุงูุชุญ ููู `.env.local`** ูู ูุฌูุฏ ุงููุดุฑูุน

2. **ุฃุถู ุงูุณุทุฑ ุงูุชุงูู:**
   ```
   SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
   ```
   
   ุงุณุชุจุฏู `your_service_role_key_here` ุจุงูููุชุงุญ ุงูุฐู ูุณุฎุชู

3. **ุงุญูุธ ุงูููู**

---

## ุงูุฎุทูุฉ 3: ุฅูุดุงุก Storage Bucket (ุทุฑููุชุงู)

### โ ุงูุทุฑููุฉ 1: ุชููุงุฆูุฉ (ุฃุณูู) ๐ฏ

**ุดุบู ุงูุณูุฑูุจุช:**
```bash
node scripts/setup-storage-simple.js
```

ุฅุฐุง ูุฌุญุ ุงูุชููุช! ๐

---

### ๐ง ุงูุทุฑููุฉ 2: ูุฏููุฉ (ุฅุฐุง ูู ุชุนูู ุงูุทุฑููุฉ 1)

#### ุฅูุดุงุก Bucket:

1. ูู Supabase Dashboard:
   - ุงุถุบุท **Storage** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ

2. ุฅูุดุงุก Bucket ุฌุฏูุฏ:
   - ุงุถุบุท **New bucket** ุฃู **+ New bucket**
   - **Name:** `avatars` (ุจุงูุถุจุท ููุฐุง)
   - **Public bucket:** โ ูุนูู (ON)
   - **File size limit:** `5` (MB)
   - **Allowed MIME types:** `image/*`
   - ุงุถุบุท **Create bucket**

#### ุฅุนุฏุงุฏ Policies (ุงูุฃูุงู):

1. **ุงูุชุญ ุงูู bucket:**
   - ุงุถุบุท ุนูู `avatars` ุงูุฐู ุฃูุดุฃุชู

2. **ุงุฐูุจ ุฅูู Policies:**
   - ุงุถุบุท ุนูู ุชุจููุจ **Policies**

3. **ุฅูุดุงุก Policy ูููุฑุงุกุฉ (Public Read):**
   - ุงุถุบุท **New Policy**
   - **Policy name:** `Public Avatar Read`
   - **Allowed operation:** ุงุฎุชุฑ `SELECT`
   - **Target roles:** ุงุฎุชุฑ `anon` ู `authenticated`
   - **USING expression:** ุงูุชุจ `true`
   - ุงุถุบุท **Save Policy**

4. **ุฅูุดุงุก Policy ูููุชุงุจุฉ (Authenticated Upload):**
   - ุงุถุบุท **New Policy**
   - **Policy name:** `Authenticated Avatar Upload`
   - **Allowed operation:** ุงุฎุชุฑ `INSERT`
   - **Target roles:** ุงุฎุชุฑ `authenticated` ููุท
   - **USING expression:** ุงูุชุจ `auth.role() = 'authenticated'`
   - **WITH CHECK expression:** ุงูุชุจ `auth.role() = 'authenticated'`
   - ุงุถุบุท **Save Policy**

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

1. **ูู Supabase Dashboard:**
   - ุงุฐูุจ ุฅูู **Storage**
   - ูุฌุจ ุฃู ุชุฑู bucket ุงุณูู `avatars`
   - ุงุถุบุท ุนููู ูุชุฃูุฏ ูู ูุฌูุฏ Policy ูุงุญุฏุฉ ุนูู ุงูุฃูู

2. **ูู ุงููุดุฑูุน:**
   - ุดุบู ุงููุดุฑูุน: `npm run dev`
   - ุณุฌูู ุญุณุงุจ ุฌุฏูุฏ
   - ุงุฐูุจ ุฅูู ุงูููู ุงูุดุฎุตู
   - ุฌุฑูุจ ุฑูุน ุตูุฑุฉ ุดุฎุตูุฉ

---

## ๐ ุญู ุงููุดุงูู

### ุงูุฎุทุฃ: "Bucket not found"
- ุชุฃูุฏ ูู ุฅูุดุงุก bucket ุจุงุณู `avatars` ุจุงูุถุจุท
- ุชุฃูุฏ ูู ุฃู ุงูู bucket ููุฌูุฏ ูู Storage

### ุงูุฎุทุฃ: "Policy violation" ุนูุฏ ุฑูุน ุตูุฑุฉ
- ุชุฃูุฏ ูู ุฅูุดุงุก Policies ููุง ูู ููุถุญ ุฃุนูุงู
- ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู (ูุฌุจ ุฃู ุชููู authenticated)

### ุงูุฎุทุฃ: "File too large"
- ุชุฃูุฏ ูู ุฃู File size limit = 5MB
- ุงูุตูุฑ ุงููุจูุฑุฉ ูู ุชุนูู

---

## ๐ ุชุญุชุงุฌ ูุณุงุนุฏุฉุ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉุ ุฃุฎุจุฑูู ูุณุฃุณุงุนุฏู! ๐


