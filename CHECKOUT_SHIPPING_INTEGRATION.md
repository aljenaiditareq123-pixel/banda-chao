# ๐ข ุชูุงูู ุญุณุงุจ ุงูุดุญู ุงูุฏููุงูููู ูู ุตูุญุฉ Checkout

## โ ูุง ุชู ุชูููุฐู

ุชู ุฑุจุท ุตูุญุฉ Checkout ูุน ูุธุงู ุญุณุงุจ ุงูุดุญู Hub Model ูู Backend ููุนุฑุถ ุชูููุฉ ุงูุดุญู ุงูุฏููุงููููุฉ ุจูุงุกู ุนูู ุฏููุฉ ุงูุนููู.

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. Backend - `server/src/api/orders.ts`
**ุชู ุฅุถุงูุฉ:**
- Endpoint ุฌุฏูุฏ: `GET /orders/shipping/calculate`
- ูุญุณุจ ุชูููุฉ ุงูุดุญู ุจูุงุกู ุนูู:
  - ุฑูุฒ ุงูุฏููุฉ (country code)
  - ูุงุฆูุฉ ุงูููุชุฌุงุช ูุน ุฃูุฒุงููุง

**ุงูุงุณุชุฎุฏุงู:**
```
GET /api/v1/orders/shipping/calculate?country=US&items=[{"weightInKg":1,"quantity":1}]
```

**Response:**
```json
{
  "success": true,
  "shipping": {
    "cost": 80,
    "details": {
      "chinaToUae": 15,
      "handling": 25,
      "uaeToCustomer": 40,
      "region": "US"
    }
  }
}
```

### 2. Frontend - `lib/api.ts`
**ุชู ุฅุถุงูุฉ:**
- ุฏุงูุฉ `calculateShipping()` ูู `ordersAPI`
- ุชุณุชุฏุนู Backend endpoint ูุญุณุงุจ ุงูุดุญู

### 3. Frontend - `app/[locale]/checkout/page-client.tsx`
**ุงูุชุญุฏูุซุงุช:**
1. โ **ุญูู ุงูุฏููุฉ**: ุชุญููู ูู input text ุฅูู dropdown ูุน ูุงุฆูุฉ ุงูุฏูู
2. โ **ุญุณุงุจ ุงูุดุญู ุงูุชููุงุฆู**: ุนูุฏ ุงุฎุชูุงุฑ ุงูุฏููุฉุ ูุชู ุญุณุงุจ ุงูุดุญู ุชููุงุฆูุงู
3. โ **ุนุฑุถ ุชูุงุตูู ุงูุดุญู**: ุนุฑุถ ุชูุงุตูู ุงููุฑุงุญู ุงูุซูุงุซ (ุงูุตููโุงูุฅูุงุฑุงุชุ ุงูููุงููุฉุ ุงูุฅูุงุฑุงุชโุงูุนููู)
4. โ **ุญุงูุฉ ุงูุชุญููู**: ุนุฑุถ "ุฌุงุฑู ุงูุญุณุงุจ..." ุฃุซูุงุก ุทูุจ ุงูุณุนุฑ
5. โ **ุชุญุฏูุซ ุงููุฌููุน**: ุงููุฌููุน ุงูููุงุฆู = ุณุนุฑ ุงูููุชุฌุงุช + ุงูุดุญู + ุงูุถุฑุงุฆุจ

---

## ๐ฏ ููููุฉ ุงูุนูู

### ุงูุฎุทูุฉ 1: ุงูุนููู ูุฎุชุงุฑ ุงูุฏููุฉ
```
ุงูุนููู ูุฎุชุงุฑ "ุงูููุงูุงุช ุงููุชุญุฏุฉ (US)" ูู dropdown
```

### ุงูุฎุทูุฉ 2: Frontend ูุทูุจ ุญุณุงุจ ุงูุดุญู
```javascript
// ูุชู ุงุณุชุฏุนุงุก API ุชููุงุฆูุงู
ordersAPI.calculateShipping({
  country: 'US',
  items: [{ weightInKg: 1, quantity: 1 }]
})
```

### ุงูุฎุทูุฉ 3: Backend ูุญุณุจ ุงูุดุญู
```javascript
// Backend ูุณุชุฎุฏู Hub Model
calculateHubShippingForItems('US', items)
// ุงููุชูุฌุฉ: 80 ุฏุฑูู (15 + 25 + 40)
```

### ุงูุฎุทูุฉ 4: Frontend ูุนุฑุถ ุงูุณุนุฑ
```
ุฑุณูู ุงูุดุญู: $21.60 (80 ุฏุฑูู ร 0.27)
ุงููุฌููุน ุงูููุงุฆู: ุณุนุฑ ุงูููุชุฌ + $21.60 + ุงูุถุฑุงุฆุจ
```

---

## ๐ ูุงุฆูุฉ ุงูุฏูู ุงููุฏุนููุฉ

### ุฃูุฑููุง
- ๐บ๐ธ ุงูููุงูุงุช ุงููุชุญุฏุฉ (US)

### ุฃูุฑูุจุง
- ๐ฉ๐ช ุฃููุงููุง (DE)
- ๐ซ๐ท ูุฑูุณุง (FR)
- ๐ฌ๐ง ุจุฑูุทุงููุง (GB)
- ๐ฎ๐น ุฅูุทุงููุง (IT)
- ๐ช๐ธ ุฅุณุจุงููุง (ES)
- ๐ณ๐ฑ ููููุฏุง (NL)
- ๐ง๐ช ุจูุฌููุง (BE)

### ุงูุฎููุฌ
- ๐ธ๐ฆ ุงูุณุนูุฏูุฉ (SA)
- ๐ฆ๐ช ุงูุฅูุงุฑุงุช (AE)
- ๐ฐ๐ผ ุงููููุช (KW)
- ๐ถ๐ฆ ูุทุฑ (QA)
- ๐ง๐ญ ุงูุจุญุฑูู (BH)
- ๐ด๐ฒ ุนูุงู (OM)

### ุจุงูู ุงูุนุงูู
- ๐ช๐ฌ ูุตุฑ (EG)
- ๐ฎ๐ณ ุงูููุฏ (IN)
- ๐ฆ๐บ ุฃุณุชุฑุงููุง (AU)
- ๐จ๐ฆ ููุฏุง (CA)
- ๐ฏ๐ต ุงููุงุจุงู (JP)
- ๐จ๐ณ ุงูุตูู (CN)

---

## ๐ฐ ุชุญููู ุงูุนููุงุช

ุงููุธุงู ูุญุณุจ ุงูุดุญู ุจุงูุฏุฑูู ุงูุฅูุงุฑุงุชู (AED) ุซู ูุญููู ุฅูู ุนููุฉ ุงูุนููู:
- **1 AED = 0.27 USD** (ุชูุฑูุจู)
- ุฅุฐุง ูุงูุช ุงูุนููุฉ AEDุ ูุชู ุนุฑุถ ุงูุณุนุฑ ูุจุงุดุฑุฉ

**ููุงุญุธุฉ:** ูููู ุชุญุฏูุซ ุณุนุฑ ุงูุตุฑู ูุงุญูุงู ูู API ุญูููู.

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุนูุฏ ุงุฎุชูุงุฑ ุงูุฏููุฉ:
1. ูุธูุฑ "ุฌุงุฑู ุญุณุงุจ ุงูุดุญู..." ุชุญุช ุญูู ุงูุฏููุฉ
2. ูู ููุฎุต ุงูุทูุจุ ูุธูุฑ "..." ุจุฌุงูุจ "ุฑุณูู ุงูุดุญู"
3. ุจุนุฏ ุงูุญุณุงุจุ ูุธูุฑ ุงูุณุนุฑ + ุชูุงุตูู ุงููุฑุงุญู ุงูุซูุงุซ

### ุชูุงุตูู ุงูุดุญู ุงููุนุฑูุถุฉ:
```
ูู ุงูุตูู โ ุงูุฅูุงุฑุงุช: 15.00 ุฏุฑูู
ุงูููุงููุฉ: 25 ุฏุฑูู
ูู ุงูุฅูุงุฑุงุช โ US: 40.00 ุฏุฑูู
ุงูููุทูุฉ: US
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ูุญูู:
1. ุงูุชุญ ุตูุญุฉ Checkout: `http://localhost:3000/ar/checkout`
2. ุฃุถู ููุชุฌ ุฅูู ุงูุณูุฉ
3. ุงุฎุชุฑ ุฏููุฉ ูู dropdown (ูุซูุงู: US)
4. ุฑุงูุจ ุญุณุงุจ ุงูุดุญู ุงูุชููุงุฆู
5. ุชุญูู ูู ุชุญุฏูุซ ุงููุฌููุน ุงูููุงุฆู

### ุงุฎุชุจุงุฑ ุนูู ุงูุฅูุชุงุฌ:
```
https://banda-chao-frontend.onrender.com/ar/checkout
```

---

## ๐ง ุชุญุณููุงุช ูุณุชูุจููุฉ

1. **ุฅุถุงูุฉ ูุฒู ุงูููุชุฌ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
   - ุฅุถุงูุฉ `weightInKg` ุฅูู ุฌุฏูู `products`
   - ุงุณุชุฎุฏุงู ุงููุฒู ุงููุนูู ุจุฏูุงู ูู 1 ูุฌู ุงูุชุฑุงุถู

2. **ุชุญุณูู ุชุญููู ุงูุนููุงุช**:
   - ุงุณุชุฎุฏุงู API ุณุนุฑ ุตุฑู ุญูููู (ูุซู ExchangeRate-API)
   - ุชุญุฏูุซ ุงูุฃุณุนุงุฑ ุชููุงุฆูุงู

3. **ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฏูู**:
   - ุชูุณูุน ูุงุฆูุฉ ุงูุฏูู ูู dropdown
   - ุฏุนู ุฌููุน ุฑููุฒ ุงูุฏูู ISO

4. **ุชุญุณูู UX**:
   - ุฅุถุงูุฉ ุฎุฑูุทุฉ ุชูุงุนููุฉ ูุงุฎุชูุงุฑ ุงูุฏููุฉ
   - ุญูุธ ุขุฎุฑ ุฏููุฉ ุชู ุงุฎุชูุงุฑูุง ูู localStorage

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

- โ ุญุณุงุจ ุงูุดุญู ุงูุฏููุงูููู ูุนูู ุชููุงุฆูุงู
- โ ุงูุณุนุฑ ูุชุญุฏุซ ููุฑุงู ุนูุฏ ุงุฎุชูุงุฑ ุงูุฏููุฉ
- โ ุชูุงุตูู ุงูุดุญู ูุงุถุญุฉ ููุนููู
- โ ุงููุฌููุน ุงูููุงุฆู ุฏููู (ููุชุฌ + ุดุญู + ุถุฑุงุฆุจ)
- โ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ
