# ๐ ุฅุนุฏุงุฏ Google Cloud Storage (GCS) - ุชุนูููุงุช ุฎุทูุฉ ุจุฎุทูุฉ
## Google Cloud Storage Setup Instructions

**ูุฐุง ุงูุฏููู ุณูุณุงุนุฏู ูู ุฅุนุฏุงุฏ Google Cloud Storage ูููุดุฑูุน ุฎุทูุฉ ุจุฎุทูุฉ.**

---

## ๐ ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุดุฑูุน Google Cloud

### 1.1 ุงูุฏุฎูู ุฅูู Google Cloud Console
1. ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู: **https://console.cloud.google.com**
2. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจ Google ุงูุฎุงุต ุจู

### 1.2 ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ
1. ุงููุฑ ุนูู ูุงุฆูุฉ ุงููุดุงุฑูุน ูู ุฃุนูู ุงูุตูุญุฉ (ุจุฌุงูุจ "Google Cloud")
2. ุงููุฑ ุนูู **"New Project"** (ูุดุฑูุน ุฌุฏูุฏ)
3. ุฃุฏุฎู ุงุณู ุงููุดุฑูุน: **`banda-chao`** (ุฃู ุฃู ุงุณู ุชูุถูู)
4. ุงููุฑ ุนูู **"Create"** (ุฅูุดุงุก)
5. ุงูุชุธุฑ ุญุชู ูุชู ุฅูุดุงุก ุงููุดุฑูุน (ูุฏ ูุณุชุบุฑู ุจุถุน ุซูุงูู)

### 1.3 ูุณุฎ Project ID
1. ุจุนุฏ ุฅูุดุงุก ุงููุดุฑูุนุ ุงููุฑ ุนูู ุงููุดุฑูุน ุงูุฌุฏูุฏ
2. ุงูุณุฎ **Project ID** (ุณูุจุฏู ูุซู: `banda-chao-123456`)
3. **ุงุญูุธ ูุฐุง ุงูู Project ID** - ุณุชุญุชุงุฌู ูุงุญูุงู

---

## ๐ฆ ุงูุฎุทูุฉ 2: ุฅูุดุงุก Storage Bucket

### 2.1 ูุชุญ Cloud Storage
1. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฐูุจ ุฅูู **"Cloud Storage"** โ **"Buckets"**
2. ุฃู ุงุฐูุจ ูุจุงุดุฑุฉ ุฅูู: **https://console.cloud.google.com/storage/browser**

### 2.2 ุฅูุดุงุก Bucket ุฌุฏูุฏ
1. ุงููุฑ ุนูู **"Create Bucket"** (ุฅูุดุงุก Bucket)
2. ุฃุฏุฎู ุงุณู ุงูู Bucket: **`banda-chao-uploads`** (ูุฌุจ ุฃู ูููู ูุฑูุฏุงู ุนุงูููุงู)
   - ุฅุฐุง ูุงู ุงูุงุณู ูุณุชุฎุฏูุงูุ ุฌุฑุจ: `banda-chao-uploads-[ุฑูู]` ุฃู `banda-chao-files-[ุงุณูู]`
3. ุงุฎุชุฑ **Location type**: **"Region"**
4. ุงุฎุชุฑ **Region**: **"asia-east1"** (ุฃู ุฃู ููุทูุฉ ูุฑูุจุฉ ููู)
5. ุงุฎุชุฑ **Storage class**: **"Standard"**
6. ุงุฎุชุฑ **Access control**: **"Uniform"**
7. ุงููุฑ ุนูู **"Create"** (ุฅูุดุงุก)

### 2.3 ุชูุนูู ุงููุตูู ุงูุนุงู (Public Access)
1. ุจุนุฏ ุฅูุดุงุก ุงูู Bucketุ ุงููุฑ ุนูู ุงุณูู
2. ุงุฐูุจ ุฅูู ุชุจููุจ **"Permissions"** (ุงูุตูุงุญูุงุช)
3. ุงููุฑ ุนูู **"Add Principal"** (ุฅุถุงูุฉ ูุณุชุฎุฏู)
4. ูู ุญูู **"New principals"**ุ ุงูุชุจ: **`allUsers`**
5. ูู ุญูู **"Role"**ุ ุงุฎุชุฑ: **"Storage Object Viewer"**
6. ุงููุฑ ุนูู **"Save"** (ุญูุธ)
7. ุณุชุธูุฑ ุฑุณุงูุฉ ุชุญุฐูุฑ - ุงููุฑ ุนูู **"Allow public access"** (ุงูุณูุงุญ ุจุงููุตูู ุงูุนุงู)

---

## ๐ ุงูุฎุทูุฉ 3: ุฅูุดุงุก Service Account ูููู ุงูููุชุงุญ

### 3.1 ุฅูุดุงุก Service Account
1. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฐูุจ ุฅูู **"IAM & Admin"** โ **"Service Accounts"**
2. ุฃู ุงุฐูุจ ูุจุงุดุฑุฉ ุฅูู: **https://console.cloud.google.com/iam-admin/serviceaccounts**
3. ุงููุฑ ุนูู **"Create Service Account"** (ุฅูุดุงุก Service Account)

### 3.2 ุฅุฏุฎุงู ุจูุงูุงุช Service Account
1. **Service account name**: ุฃุฏุฎู **`banda-chao-storage`**
2. **Service account ID**: ุณูุชู ููุคู ุชููุงุฆูุงู (ุงุชุฑูู ููุง ูู)
3. **Description**: ุฃุฏุฎู **`Service account for Banda Chao file uploads`**
4. ุงููุฑ ุนูู **"Create and Continue"** (ุฅูุดุงุก ููุชุงุจุนุฉ)

### 3.3 ุฅุถุงูุฉ ุงูุตูุงุญูุงุช (Roles)
1. ูู ุญูู **"Grant this service account access to project"**ุ ุงุจุญุซ ุนู: **`Storage Admin`**
2. ุญุฏุฏ **"Storage Admin"** ูู ุงููุงุฆูุฉ
3. ุงููุฑ ุนูู **"Continue"** (ูุชุงุจุนุฉ)
4. ุงููุฑ ุนูู **"Done"** (ุชู)

### 3.4 ุฅูุดุงุก ููุชุงุญ JSON
1. ุจุนุฏ ุฅูุดุงุก Service Accountุ ุณุชุฌุฏูุง ูู ุงููุงุฆูุฉ
2. ุงููุฑ ุนูู **Service Account** ุงูุฐู ุฃูุดุฃุชู (`banda-chao-storage`)
3. ุงุฐูุจ ุฅูู ุชุจููุจ **"Keys"** (ุงูููุงุชูุญ)
4. ุงููุฑ ุนูู **"Add Key"** โ **"Create new key"**
5. ุงุฎุชุฑ **"JSON"** ูุตูุบุฉ ุงูููุชุงุญ
6. ุงููุฑ ุนูู **"Create"** (ุฅูุดุงุก)
7. **ุณูุชู ุชุญููู ููู JSON ุชููุงุฆูุงู** - ุงุญูุธู ูู ููุงู ุขูู ุนูู ุฌูุงุฒู

---

## ๐ ุงูุฎุทูุฉ 4: ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ูู Render

### 4.1 ุงูุฏุฎูู ุฅูู Render Dashboard
1. ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู: **https://dashboard.render.com**
2. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจู
3. ุงุจุญุซ ุนู ุฎุฏูุฉ **Backend** ุงูุฎุงุตุฉ ุจู (`banda-chao-backend`)

### 4.2 ูุชุญ Environment Variables
1. ุงููุฑ ุนูู ุงุณู ุงูุฎุฏูุฉ
2. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงููุฑ ุนูู **"Environment"** (ุงูุจูุฆุฉ)
3. ุงุจุญุซ ุนู ูุณู **"Environment Variables"** (ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ)

### 4.3 ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

#### ุงููุชุบูุฑ 1: GCLOUD_PROJECT_ID
1. ุงููุฑ ุนูู **"Add Environment Variable"** (ุฅุถุงูุฉ ูุชุบูุฑ ุจูุฆู)
2. **Key**: `GCLOUD_PROJECT_ID`
3. **Value**: ุงูุตู **Project ID** ุงูุฐู ูุณุฎุชู ูู ุงูุฎุทูุฉ 1.3
   - ูุซุงู: `banda-chao-123456`
4. ุงููุฑ ุนูู **"Save Changes"** (ุญูุธ ุงูุชุบููุฑุงุช)

#### ุงููุชุบูุฑ 2: GCS_BUCKET_NAME
1. ุงููุฑ ุนูู **"Add Environment Variable"** ูุฑุฉ ุฃุฎุฑู
2. **Key**: `GCS_BUCKET_NAME`
3. **Value**: ุงูุตู ุงุณู ุงูู Bucket ุงูุฐู ุฃูุดุฃุชู ูู ุงูุฎุทูุฉ 2.2
   - ูุซุงู: `banda-chao-uploads`
4. ุงููุฑ ุนูู **"Save Changes"** (ุญูุธ ุงูุชุบููุฑุงุช)

#### ุงููุชุบูุฑ 3: GCS_SERVICE_ACCOUNT_KEY
1. ุงูุชุญ ููู JSON ุงูุฐู ุชู ุชุญูููู ูู ุงูุฎุทูุฉ 3.4
2. ุงูุณุฎ **ุงููุญุชูู ุงููุงูู** ููููู (Ctrl+A ุซู Ctrl+C)
3. ูู Renderุ ุงููุฑ ุนูู **"Add Environment Variable"**
4. **Key**: `GCS_SERVICE_ACCOUNT_KEY`
5. **Value**: ุงูุตู **ุงููุญุชูู ุงููุงูู** ูููู JSON (ูุฌุจ ุฃู ูููู JSON ุตุญูุญ)
   - ูุซุงู:
   ```json
   {
     "type": "service_account",
     "project_id": "banda-chao-123456",
     "private_key_id": "...",
     "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
     "client_email": "banda-chao-storage@banda-chao-123456.iam.gserviceaccount.com",
     ...
   }
   ```
6. **โ๏ธ ููู ุฌุฏุงู:** ุชุฃูุฏ ูู ูุณุฎ **ุงููุญุชูู ุงููุงูู** ููู JSON (ุจูุง ูู ุฐูู ุงูุฃููุงุณ `{}`)
7. ุงููุฑ ุนูู **"Save Changes"** (ุญูุธ ุงูุชุบููุฑุงุช)

---

## ๐ค ุงูุฎุทูุฉ 5: ุฅุถุงูุฉ ูุชุบูุฑ Speech-to-Text (ูููููุฑูููู)

### 5.1 ุงูุญุตูู ุนูู Google Speech-to-Text API Key
1. ูู Google Cloud Consoleุ ุงุฐูุจ ุฅูู **"APIs & Services"** โ **"Library"**
2. ุฃู ุงุฐูุจ ูุจุงุดุฑุฉ ุฅูู: **https://console.cloud.google.com/apis/library**
3. ุงุจุญุซ ุนู: **"Cloud Speech-to-Text API"**
4. ุงููุฑ ุนูู ุงููุชูุฌุฉ ูุงุฎุชุฑ **"Enable"** (ุชูุนูู)
5. ุงูุชุธุฑ ุญุชู ูุชู ุชูุนูู ุงูู API (ุจุถุน ุซูุงูู)

### 5.2 ุฅูุดุงุก API Key
1. ุงุฐูุจ ุฅูู **"APIs & Services"** โ **"Credentials"**
2. ุฃู ุงุฐูุจ ูุจุงุดุฑุฉ ุฅูู: **https://console.cloud.google.com/apis/credentials**
3. ุงููุฑ ุนูู **"Create Credentials"** โ **"API Key"**
4. ุณูุชู ุฅูุดุงุก API Key ุชููุงุฆูุงู
5. **ุงูุณุฎ ุงูู API Key** (ุณูุจุฏู ูุซู: `AIzaSy...`)

### 5.3 ุชูููุฏ API Key (ุงุฎุชูุงุฑู ููู ููุตู ุจู)
1. ุงููุฑ ุนูู ุงูู API Key ุงูุฐู ุฃูุดุฃุชู
2. ูู ูุณู **"API restrictions"**ุ ุงุฎุชุฑ **"Restrict key"**
3. ุงุฎุชุฑ **"Cloud Speech-to-Text API"** ููุท
4. ุงููุฑ ุนูู **"Save"** (ุญูุธ)

### 5.4 ุฅุถุงูุฉ ุงููุชุบูุฑ ูู Render
1. ูู Render Dashboardุ ุงุฐูุจ ุฅูู **Environment Variables**
2. ุงููุฑ ุนูู **"Add Environment Variable"**
3. **Key**: `GOOGLE_SPEECH_API_KEY`
4. **Value**: ุงูุตู ุงูู API Key ุงูุฐู ูุณุฎุชู ูู ุงูุฎุทูุฉ 5.2
   - **โ๏ธ ููู:** ุงุณุชุฎุฏู ุงูู API Key ุงูุญูููู ูู Google Cloud Consoleุ ูููุณ ูุซุงู
   - **โ๏ธ ุฃููู:** ูุง ุชุดุงุฑู ุงูู API Key ูุน ุฃู ุดุฎุต ููุง ุชุฑูุนู ุฅูู GitHub
5. ุงููุฑ ุนูู **"Save Changes"** (ุญูุธ ุงูุชุบููุฑุงุช)

---

## โ ุงูุฎุทูุฉ 6: ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ

### 6.1 ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุฉ
1. ูู Render Dashboardุ ุงุฐูุจ ุฅูู ุฎุฏูุฉ Backend
2. ุงููุฑ ุนูู **"Manual Deploy"** โ **"Deploy latest commit"**
3. ุงูุชุธุฑ ุญุชู ููุชูู ุงููุดุฑ (2-3 ุฏูุงุฆู)

### 6.2 ุงูุชุญูู ูู ุงูุณุฌูุงุช (Logs)
1. ูู Render Dashboardุ ุงุฐูุจ ุฅูู ุชุจููุจ **"Logs"**
2. ุงุจุญุซ ุนู ุฑุณุงูุฉ: **`[GCS] โ Google Cloud Storage initialized successfully`**
3. ุฅุฐุง ุธูุฑุช ูุฐู ุงูุฑุณุงูุฉุ ูุงูุฅุนุฏุงุฏ ูุงุฌุญ! โ

---

## ๐ ููุฎุต ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ุงููุทููุจุฉ

ุจุนุฏ ุฅููุงู ุฌููุน ุงูุฎุทูุงุชุ ูุฌุจ ุฃู ูููู ูุฏูู **4 ูุชุบูุฑุงุช ุจูุฆูุฉ** ูู Render:

| ุงููุชุบูุฑ | ุงููููุฉ | ูุซุงู |
|---------|--------|------|
| `GCLOUD_PROJECT_ID` | Project ID ูู Google Cloud | `banda-chao-123456` |
| `GCS_BUCKET_NAME` | ุงุณู ุงูู Bucket | `banda-chao-uploads` |
| `GCS_SERVICE_ACCOUNT_KEY` | ูุญุชูู ููู JSON ุงููุงูู | `{"type":"service_account",...}` |
| `GOOGLE_SPEECH_API_KEY` | API Key ููู Speech-to-Text | `AIzaSy...` |

---

## ๐ ููุงุญุธุงุช ุฃูููุฉ ูููุฉ

1. **ูุง ุชุดุงุฑู ููู JSON** ูุน ุฃู ุดุฎุต
2. **ูุง ุชุฑูุน ููู JSON** ุฅูู GitHub ุฃู ุฃู ูุณุชูุฏุน ุนุงู
3. **ุงุญูุธ ููู JSON** ูู ููุงู ุขูู ุนูู ุฌูุงุฒู
4. **ุฅุฐุง ููุฏุช ุงูููู**ุ ููููู ุฅูุดุงุก ููุชุงุญ ุฌุฏูุฏ ูู Google Cloud Console

---

## โ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ: "GCS_SERVICE_ACCOUNT_KEY is not set"
**ุงูุญู:** ุชุฃูุฏ ูู ูุณุฎ **ุงููุญุชูู ุงููุงูู** ูููู JSON (ุจูุง ูู ุฐูู `{` ู `}`)

### ุงููุดููุฉ: "Failed to initialize GCS"
**ุงูุญู:** 
1. ุชุญูู ูู ุฃู ููู JSON ุตุญูุญ
2. ุชุฃูุฏ ูู ุฃู Service Account ูุฏูู ุตูุงุญูุฉ "Storage Admin"
3. ุชุญูู ูู ุฃู Project ID ุตุญูุญ

### ุงููุดููุฉ: "Bucket not found"
**ุงูุญู:** 
1. ุชุฃูุฏ ูู ุฃู ุงุณู ุงูู Bucket ุตุญูุญ
2. ุชุฃูุฏ ูู ุฃู ุงูู Bucket ููุฌูุฏ ูู ููุณ ุงููุดุฑูุน

### ุงููุดููุฉ: ุงููููุฑูููู ูุง ูุนูู
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅุถุงูุฉ `GOOGLE_SPEECH_API_KEY`
2. ุชุฃูุฏ ูู ุชูุนูู "Cloud Speech-to-Text API"
3. ุฃุนุฏ ุชุดุบูู ุงูุฎุฏูุฉ ูู Render

---

## โ ุชู ุงูุฅุนุฏุงุฏ ุจูุฌุงุญ!

ุจุนุฏ ุฅููุงู ุฌููุน ุงูุฎุทูุงุชุ ุณูููู Google Cloud Storage ุฌุงูุฒุงู ููุงุณุชุฎุฏุงูุ ูุณูุนูู ุงููููุฑูููู ูู AI Assistant ุจุดูู ุตุญูุญ.

**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุฃุนุฏ ูุดุฑ ุงูุฎุฏูุฉ ูู Render ูุงุฎุชุจุฑ ุฑูุน ุตูุฑุฉ ุฃู ุงุณุชุฎุฏุงู ุงููููุฑูููู.

---

**ุขุฎุฑ ุชุญุฏูุซ:** ุฏูุณูุจุฑ 2024

