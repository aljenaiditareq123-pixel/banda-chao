# ููุฎุต ุฅุตูุงุญุงุช ุงูุจุงูุฏุง ุงููุคุณุณ - Authentication & Single Panda

**ุงูุชุงุฑูุฎ:** 2024-12-19  
**ุงูุญุงูุฉ:** โ ุชู ุงูุชูููุฐ ุจูุฌุงุญ

---

## ๐ ุงููุดููุงุช ุงูุชู ุชู ุฅุตูุงุญูุง

### ุงููุดููุฉ 1: ูุดููุฉ Token / Authentication ูู Founder Panda Chat

**ุงููุดููุฉ:**
- ุนูุฏ ุงุณุชุฎุฏุงู ุงููุคุณุณ ููุจุงูุฏุง ุงููุคุณุณุ ูุงู ูุญุตู ุนูู ุฑุณุงูุฉ ุฎุทุฃ "ุฌุฑูุจ ุชุณุฌูู ุงูุฏุฎูู ููุฌุฏุฏุงู" ุฑุบู ุฃูู ูุณุฌู ุฏุฎูู ุจุงููุนู
- ูุงูุช ุงูุทูุจุงุช ุฅูู AI endpoint ูุง ุชุฑุณู JWT token ุจุดูู ุตุญูุญ

**ุงูุญู:**
- โ ุชู ุฅุถุงูุฉ `useAuth()` hook ูู `FounderChatPanel` ููุญุตูู ุนูู token
- โ ุชู ุฅุถุงูุฉ `Authorization: Bearer ${token}` header ูู ุฌููุน ุงูุทูุจุงุช ุฅูู AI endpoints
- โ ุชู ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ููุชุนุงูู ูุน 401 ุจุดูู ุฃูุถู
- โ ุชู ุฅุถุงูุฉ `authenticateToken` middleware ุฅูู `/api/v1/ai/assistant` route ูู Backend

---

### ุงููุดููุฉ 2: ุชูุญูุฏ ุฌููุน ุงูุจุงูุฏุงุช ูู ุจุงูุฏุง ูุงุญุฏ ููุท

**ุงููุดููุฉ:**
- ูุงู ููุงู 6 ุจุงูุฏุงุช ูุฎุชููุฉ ูู Dashboard (ุงูุจุงูุฏุง ุงููุคุณุณุ ุงูุจุงูุฏุง ุงูุชูููุ ุงูุจุงูุฏุง ุงูุญุงุฑุณุ ุฅูุฎ)
- ุงููุทููุจ ุงูุขู ูู ุงุณุชุฎุฏุงู **"ุงูุจุงูุฏุง ุงููุคุณุณ" ููุท**

**ุงูุญู:**
- โ ุชู ุชุญุฏูุซ `AIAdvisorsSection` ูุนุฑุถ ุจุทุงูุฉ ูุงุญุฏุฉ ููุท: "ุงูุจุงูุฏุง ุงููุคุณุณ"
- โ ุชู ุชุญุฏูุซ `app/founder/assistant/page-client.tsx` ูุงุณุชุฎุฏุงู ุฏุงุฆูุงู `assistantId = 'founder'`
- โ ุชู ุชุญุฏูุซ `server/src/lib/assistantProfiles.ts` ูุชุนููู ุฌููุน ุงูู IDs ุฅูู `founder`
- โ ุชู ุชุญุฏูุซ Backend route `/api/v1/ai/assistant` ูุงุณุชุฎุฏุงู ุฏุงุฆูุงู founder profile

---

## ๐ง ุงููููุงุช ุงูุชู ุชู ุชุนุฏูููุง

### Frontend:

1. **`components/founder/FounderChatPanel.tsx`**
   - โ ุฅุถุงูุฉ `useAuth()` hook ููุญุตูู ุนูู token
   - โ ุฅุถุงูุฉ `Authorization: Bearer ${token}` header ูู ุฌููุน ุงูุทูุจุงุช:
     - `/ai/founder` endpoint
     - `/ai/assistant` endpoint
     - `/founder/sessions` endpoints
   - โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ููุชุนุงูู ูุน 401 ุจุดูู ุฃูุถู
   - โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ ุนูุฏ ุงูุชูุงุก ุงูุฌูุณุฉ

2. **`components/founder/AIAdvisorsSection.tsx`**
   - โ ุชูููู array ูู 6 advisors ุฅูู 1 ููุท: Founder Panda
   - โ ุชุญุฏูุซ ุงูุนููุงู ูู "ูุฌูุณ ุงูุจุงูุฏุง ุงูุงุณุชุดุงุฑู" ุฅูู "ูุณุชุดุงุฑู ุงูุฅููุชุฑููู"
   - โ ุชุญุฏูุซ ุงููุตู ููููู ุฃูุซุฑ ุดููููุฉ

3. **`app/founder/assistant/page-client.tsx`**
   - โ ุชุฌุงูู query parameter `?panda=` ูุงุณุชุฎุฏุงู ุฏุงุฆูุงู `assistantId = 'founder'`
   - โ ุฅุฒุงูุฉ ููุทู ุงุฎุชูุงุฑ Panda ูู query params

### Backend:

4. **`server/src/lib/assistantProfiles.ts`**
   - โ ุชุญุฏูุซ `mapAssistantId()` ูุชุนูุฏ ุฏุงุฆูุงู `'founder'`
   - โ ุชุญุฏูุซ `getAssistantProfile()` ูุชุนูุฏ ุฏุงุฆูุงู founder profile
   - โ ุฌููุน ุงูู IDs ุงูุฃุฎุฑู (tech, guard, commerce, ุฅูุฎ) ุชุฑุฌุน ุงูุขู ุฅูู founder

5. **`server/src/api/ai.ts`**
   - โ ุฅุถุงูุฉ `authenticateToken` middleware ุฅูู `/assistant` route
   - โ ุงูุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุทูุจุงุช ุชุญุชุงุฌ authentication
   - โ ุชุญุฏูุซ ููุทู `mapAssistantId()` ูุงุณุชุฎุฏุงู ุฏุงุฆูุงู founder

---

## โ ุงููุชุงุฆุฌ

### Authentication Fixed:

- โ ุนูุฏูุง ูููู ุงููุคุณุณ ูุณุฌู ุฏุฎูู ูุน token ุตุญูุญุ ูุนูู Founder Panda chat ุจุฏูู ุฃุฎุทุงุก
- โ 401 errors ูุชู ุงูุชุนุงูู ูุนูุง ุจุดูู ูุงุฆู ูุน ุฑุณุงูุฉ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- โ ุฌููุน ุงูุทูุจุงุช ุฅูู AI endpoints ุชุฑุณู JWT token ุจุดูู ุตุญูุญ

### Single Panda Experience:

- โ ููุท "ุงูุจุงูุฏุง ุงููุคุณุณ" ูุธูุฑ ูู advisor ูู Founder Dashboard
- โ ุตูุญุฉ chat ุฏุงุฆูุงู ุชุณุชุฎุฏู Founder Panda profile
- โ ุฌููุน ุงูุจุงูุฏุงุช ุงูุฃุฎุฑู ูุนุทูุฉ / ููุญุฏุฉ ูู Founder Panda ุนูู Frontend ู Backend

---

## ๐งช ุงุฎุชุจุงุฑ

### ูุง ูุฌุจ ุงุฎุชุจุงุฑู:

1. **Authentication:**
   - โ ุชุณุฌูู ุงูุฏุฎูู ูู Founder
   - โ ูุชุญ `/founder/assistant`
   - โ ุฅุฑุณุงู ุณุคุงู ููุจุงูุฏุง ุงููุคุณุณ
   - โ ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฑุณุงูุฉ "ุฌุฑูุจ ุชุณุฌูู ุงูุฏุฎูู ูุฌุฏุฏุงู"

2. **Single Panda:**
   - โ ูุชุญ `/founder` โ ูุฌุจ ุฃู ูุธูุฑ ุจุทุงูุฉ ูุงุญุฏุฉ ููุท: "ุงูุจุงูุฏุง ุงููุคุณุณ"
   - โ ุงูููุฑ ุนูู ุงูุจุทุงูุฉ โ ูุฌุจ ุฃู ููุชูู ุฅูู `/founder/assistant`
   - โ ุฅุฑุณุงู ุฃุณุฆูุฉ โ ูุฌุจ ุฃู ูุนูู ูุน Founder Panda profile

3. **Error Handling:**
   - โ ุชุณุฌูู ุงูุฎุฑูุฌ ุฃู ุญุฐู token ูู localStorage
   - โ ูุญุงููุฉ ุฅุฑุณุงู ุณุคุงู โ ูุฌุจ ุฃู ูุธูุฑ ุฑุณุงูุฉ ูุงุถุญุฉ "ูุจุฏู ุฃู ุฌูุณุชู ุงูุชูุช..."

---

## ๐ ููุงุญุธุงุช

### ุชุบููุฑุงุช ูููุฉ:

1. **Token ูู Headers:**
   - ุฌููุน ุงูุทูุจุงุช ุงูุขู ุชุฑุณู `Authorization: Bearer <token>` header
   - Token ูุชู ุงูุญุตูู ุนููู ูู `useAuth()` hook

2. **Backend Authentication:**
   - `/api/v1/ai/assistant` route ุงูุขู ูุญูู ุจู `authenticateToken` middleware
   - `/api/v1/ai/founder` route ูุงู ูุญููุงู ุจุงููุนู ุจู `authenticateFounder`

3. **Single Panda:**
   - ุฌููุน ุงูู assistant IDs ุชุฑุฌุน ุงูุขู ุฅูู `founder`
   - UI ูุนุฑุถ ููุท ุจุทุงูุฉ ูุงุญุฏุฉ
   - Backend ุฏุงุฆูุงู ูุณุชุฎุฏู founder profile

---

**โ ุชู ุฅุตูุงุญ ุฌููุน ุงููุดููุงุช ุจูุฌุงุญ!**

